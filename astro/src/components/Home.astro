---
import { Github, Mail, Linkedin } from "@lucide/astro";
import Contacts from "./Contacts.astro";
---

<div class="flex flex-col items-center justify-center flex-1 px-4 md:px-0">
    <!-- Top section -->
    <div
        class="flex flex-col md:flex-row items-center text-center md:text-left"
    >
        <!-- Name + rotating title -->
        <div
            class="flex flex-col items-center w-fit rounded-md border-2 border-primary-light"
        >
            <span class="text-3xl md:text-4xl text-primary-darkest p-4 md:p-5 bg-primary-light">
                TITO SILVA
            </span>

            <button
                id="title"
                type="button"
                class="text-primary-light text-sm md:text-base p-2 md:p-3 cursor-pointer transition-opacity duration-300"
            >
                SOFTWARE DEVELOPER
            </button>
        </div>

        <!-- Intro text -->
        <div class="flex flex-col mt-6 md:mt-0 md:mx-5 max-w-xl">
            <span
                class="text-primary-light text-2xl md:text-4xl underline-offset-8"
            >
                Hello, nice to meet you.
            </span>

            <span class="text-2xl md:text-4xl my-3">
                Let's build something together.
            </span>

            <a href="/about-me" class="mt-2 inline-block">
                <span class="underline-offset-8 hover:text-primary-light">
                    <u>Discover more about my work</u> >>
                </span>
            </a>
        </div>
    </div>

    <!-- Socials -->
    <Contacts />
</div>

<!-- Rotating title logic -->
<script>
    const titles = [
        "SOFTWARE ENGINEER",
        "TECH LEAD",
        "BRASIL!",
        "FULLSTACK DEVELOPER",
        "PROBLEM SOLVER",
        "CRYPTOGRAPHY LOVER",
        "NOT AN AI",
        "MATH SUPERFAN",
        "FATHER OF A LITTLE BOY",
    ];

    const intervalMs = 2000;
    let currentIndex = 0;
    let timer: number | null = null;

    const element = document.getElementById("title");

    if (element) {
        const nextTitle = () => {
            element.classList.add("opacity-0");

            setTimeout(() => {
                currentIndex = (currentIndex + 1) % titles.length;
                element.textContent = titles[currentIndex];
                element.classList.remove("opacity-0");
            }, 300);
        };

        const start = () => {
            if (!timer) timer = setInterval(nextTitle, intervalMs);
        };

        const stop = () => {
            if (timer) clearInterval(timer);
            timer = null;
        };

        start();

        element.addEventListener("mouseenter", stop);
        element.addEventListener("mouseleave", start);
        element.addEventListener("click", nextTitle);
    }
</script>


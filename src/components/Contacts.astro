---
import { Github, Linkedin, Mail } from "@lucide/astro";
---

<div class="flex flex-row my-10 md:my-16 gap-6 md:gap-5">
  <a
    class="text-4xl md:text-5xl hover:text-primary-light transition-colors"
    href="https://github.com/titosilva"
    target="_blank"
    rel="noopener noreferrer"
    aria-label="GitHub profile"
  >
    <Github size="1lh" />
  </a>

  <a
    class="text-4xl md:text-5xl hover:text-primary-light transition-colors"
    href="https://www.linkedin.com/in/tito-silva-31265b195/"
    target="_blank"
    rel="noopener noreferrer"
    aria-label="LinkedIn profile"
  >
    <Linkedin size="1lh" />
  </a>

  <!-- Email copy button -->
  <div class="relative group">
    <button
      id="email-btn"
      type="button"
      aria-label="Copy email address"
      class="text-4xl md:text-5xl hover:text-primary-light transition-colors"
      data-email="jt.mat@hotmail.com"
    >
      <Mail size="1lh" />
    </button>

    <!-- Tooltip -->
    <div
      id="email-tooltip"
      class="pointer-events-none
          absolute bottom-full left-1/2 mb-3
          -translate-x-1/2
          opacity-0 scale-95
          group-hover:opacity-100 group-hover:scale-100
          transition-all duration-200
          bg-primary-darkest
          border border-primary-light
          text-primary-light
          text-xs md:text-sm
          rounded-md
          px-3 py-2
          whitespace-nowrap
          max-w-[90vw]
          text-center"
    >
      <span id="email-tooltip-text">Click to copy email</span>

      <!-- arrow -->
      <span
        class="absolute top-full left-1/2
            -translate-x-1/2
            w-0 h-0
            border-l-8 border-r-8 border-t-8
            border-l-transparent border-r-transparent
            border-t-primary-light"
      ></span>
    </div>
  </div>
</div>

<!-- Copy email logic -->
<script>
    const emailBtn = document.getElementById("email-btn");
    const tooltipText = document.getElementById("email-tooltip-text");

    if (emailBtn && tooltipText) {
        const email = emailBtn.dataset.email;

        emailBtn.addEventListener("click", async () => {
            try {
                await navigator.clipboard.writeText(email!);
                tooltipText.textContent = "Copied! âœ”";

                setTimeout(() => {
                    tooltipText.textContent = "Click to copy email";
                }, 2000);
            } catch {
                tooltipText.textContent = "Failed to copy ðŸ˜•";
            }
        });
    }
</script>
